<!DOCTYPE html>
<html>
	<head>
		<title>{{ title }}</title>
		<style>
			h1{
				text-align: center;
			}
			
			table{
				margin-left: 3em;
				margin-bottom: 3em; 
				border-collapse:collapse; 
				border: 1px solid black;
			}
			
			table tr:first-child{
				background-color: yellow; 
				color: black; 
				font-size: x-large;
				text-align: left;
			}
			
			table tr:first-child th:first-child{
				width: 600px;
			}
			
			table tr:first-child th:nth-child(2){
				width: 1000px;
			}
			
			table tr{
				border: 1px solid black;
			}
			
			span{
				font-family:'Courier New';
				font-size:13
			}
		</style>
	</head>
	<body>
		<h1>API Documentation</h1>
		<p>Due to the Z-Wave specific protocol, this API Rest uses only GET methods for every endpoints (network, sensors, switches, controller).</p>
		
		<h2>Network Endpoints</h2>
		<table>
			<tr>
				<th>Routes</th>
				<th>Description</th>
			</tr>

			<tr>
				<td><b><a href="/network/preview">/network/preview</a></b></td>
				<td>Preview of the Z-Wave Home Network, with some useful info available</td>
			</tr>
			<tr>
				<td><b><a href="/network/debug">/network/debug</a></b></td>
				<td>Return some debug values about the network and all the values contained in nodes</td>
			</tr>
			<tr>
				<td><b><a href="/network/timestamps">/network/timestamps</a></b></td>
				<td>Return all the timestamp values about the network from all nodes</td>
			</tr>
			<tr>
				<td><b><a href="/network/configureNodes">/network/configureNodes</a></b><br/>
				<td>Send config values to every awake nodes (e.g.: Interval in seconds to report Sensors Values)</td>
			</tr>
			<tr>
				<td><b><a href="/network/nodesConfiguration">/network/nodesConfiguration</a></b><br/>
				<td>List the config values in every awake nodes (e.g.: Interval in seconds to report Sensors Values)</td>
			</tr>
			<tr>
				<td><b><a href="/network/restart">/network/restart</a></b><br/>
				<td>Restart Z-Wave Network</td>
			</tr>
			<tr>
				<td><b><a href="/network/start">/network/start</a></b><br/>
				<td>Start the Z-Wave Network</td>
			</tr>
			<tr>
				<td><b><a href="/network/stop">/network/stop</a></b><br/>
				<td>Stop the Z-Wave Network</td>
			</tr>
			<tr>
				<td><b><a href="/network/updateRoutes">/network/updateRoutes</a></b></td>
				<td>Heal network by asking nodes to rediscover their neighbours + Init new routes</td>
			</tr>
			<tr>
				<td><b><a href="/network/updateNeighbourhood">/network/updateNeighbourhood</a></b></td>
				<td>Heal network by asking nodes to rediscover their neighbours</td>
			</tr>
		</table>
        
        <!--<h2>Controller Endpoints</h2>
        <table>
			<tr style="background-color: yellow; color: black; font-size: x-large;">
				<th style="witdh: 40%;">Routes</th>
				<th style="witdh: 60%;">Description</th>
			</tr>
			<tr style="border: 1px solid black;">
				<td><b>/controller/reset</b></td>
				<td>Hard reset the controller and clear sensor indexes (exclude any sensors before reseting the controller)</td>
			</tr>
		</table>-->
			
		<h2>Sensors Endpoints (Multisensors)</h2>
		<table>
			<tr>
				<th>Routes</th>
				<th>Description</th>
			</tr>
			<tr>   
				<td><b><a href="/sensors">/sensors</a></b></td>
				<td>Display the list of all sensors in the network</td>
			</tr>
			<tr>   
				<td><b><a href="/sensors/add">/sensors/add</a></b></td>
				<td>Add a sensor to the network when its button is pressed</td>
			</tr>
			<tr>   
				<td><b><a href="/sensors/remove">/sensors/remove</a></b></td>
				<td>Remove a sensor from the network when its button is pressed</td>
			</tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/all_measures</b></td>
				<td>Return all measures (temp, hum, lum, motion) for sensor $sensor_id</td>
			</tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/temperature</b></td>
				<td>Return current temperature for sensor $sensor_id</td>
			</tr>
			<tr>	
				<td><b>/sensors/{$sensor_id}/humidity</b></td>
				<td>Return current humidity for sensor $sensor_id</td>
			</tr>
			<tr>		
				<td><b>/sensors/{$sensor_id}/luminance</b></td>
				<td>Return current luminance for sensor $sensor_id</td>
			</tr>
			<tr>	
				<td><b>/sensors/{$sensor_id}/motion</b></td>
				<td>Return presence detection value for sensor $sensor_id</td>
			</tr>
			<tr>
                                <td><b>/sensors/{$sensor_id}/battery</b></td>
                                <td>Return current level of battery for sensor $sensor_id</td>
                        </tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/updateRoutes</a></b></td>
				<td>Heal sensor $sensor_id by rediscovering its neighbours + Init new routes</td>
			</tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/updateNeighbourhood</b></td>
				<td>Heal sensor $sensor_id by rediscovering its neighbours</td>
			</tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/refreshStaticValues</b></td>
				<td>Refresh node info (configuration and values) for sensor $sensor_id</td>
			</tr>
			<tr>   
				<td><b>/sensors/{$sensor_id}/set/{$param_index}/to/{$param_value}</b></td>
				<td>Set $param_value as value for the parameter $param_index</td>
			</tr>
			<tr>   
				<td><b>/sensors/{$sensor_id}/get/{$param_index}</b></td>
				<td>Get the value for the parameter $param_index</td>
			</tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/setNameTo/{$name}</b></td>
				<td>Set the new name of the sensor $sensor_id to the value $name</td>
			</tr>
			<tr>
				<td><b>/sensors/{$sensor_id}/setLocationTo/{$location}</b></td>
				<td>Set the new location of the sensor $sensor_id to the value $location</td>
			</tr>
        </table>
		
		<h2>Switches Endpoints (Fibaro)</h2>
		<table>
			<tr>
				<th>Routes</th>
				<th>Description</th>
			</tr>
			<tr>
				<td><b><a href="/switches">/switches</a></b></td>
				<td>Display the list of all switches in the network</td>
			</tr>
			<tr>   
				<td><b><a href="/switches/add">/switches/add</a></b></td>
				<td>Add a switch to the network when its button is pressed</td>
			</tr>
			<tr>   
				<td><b><a href="/switches/remove">/switches/remove</a></b></td>
				<td>Remove a switch from the network when its button is pressed</td>
			</tr>
			<tr>
				<td><b>/switches/{$switch_id}/{$control_type}</b></td>
				<td>Apply the $control_type (on, off or check) to the switch $switch_id</td>
			</tr>
			<tr>
				<td><b>/switches/{$switch_id}/setNameTo/{$name}</b></td>
				<td>Set the new name of the switch $switch_id to the value $name</td>
			</tr>
			<tr>
				<td><b>/switches/{$switch_id}/setLocationTo/{$location}</b></td>
				<td>Set the new location of the switch $switch_id to the value $location</td>
			</tr>
        </table>
		
		<h2>Devices Endpoints (All devices)</h2>
		<table>
			<tr>
				<th>Routes</th>
				<th>Description</th>
			</tr>
			<tr>
				<td><b><a href="/devices">/devices</a></b></td>
				<td>Display the list of all devices in the network</td>
			</tr>
			<tr>   
				<td><b><a href="/devices/add">/devices/add</a></b></td>
				<td>Add a device to the network when its button is pressed</td>
			</tr>
			<tr>   
				<td><b><a href="/devices/remove">/devices/remove</a></b></td>
				<td>Remove a device from the network when its button is pressed</td>
			</tr>
                        <tr>
                                <td><b>/devices/{$device_id}/battery</b></td>
                                <td>Return current level of battery for device $device_id</td>
                        </tr>
			<tr>
				<td><b>/devices/{$device_id}/setNameTo/{$name}</b></td>
				<td>Set the new name of the device $device_id to the value $name</td>
			</tr>
			<tr>
				<td><b>/devices/{$device_id}/setLocationTo/{$location}</b></td>
				<td>Set the new location of the device $device_id to the value $location</td>
			</tr>
        </table>
		
        <br/><br/>
        JSON format :<br/>
        <span>{<br/>
        &nbsp;&nbsp;"controller": CONTROLLER_NAME,<br/>
        &nbsp;&nbsp;"location": SENSOR_LOCATION, <br/>
        &nbsp;&nbsp;"sensor": SENSOR_ID,<br/>
        &nbsp;&nbsp;"type": SENSOR_TYPE, <br/>
        &nbsp;&nbsp;"updateTime": TIMESTAMP,<br/> 
        &nbsp;&nbsp;"value": SENSOR_VALUE<br/>
        }<br/><br/></span>
        
        Fields description :<br/>
        <span>
        &nbsp;&nbsp;<b>controller</b> : String desribing the controller (Raspberry name)<br/>
        &nbsp;&nbsp;<b>location</b> : Precise location of the sensor in his network<br/>
        &nbsp;&nbsp;<b>sensor</b> : Value describing the sensor (integer value)<br/>
        &nbsp;&nbsp;<b>type</b> : String describing the sensor, possible values : <i>"temperature", "humidity", "presence", "luminosity"</i><br/>
        &nbsp;&nbsp;<b>updateTime</b> : Timestamp of last update <br/>
        &nbsp;&nbsp;<b>value</b> : Value of the sensor, possible types : <i>float</i> for temperature(deg. celsius), humidity(%age) and luminosity(lux) ; <i>boolea$
        </span>
	</body>
</html>
